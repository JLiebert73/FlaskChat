{% extends "layout.html" %}

{% block content %}
<div class="content-section">
  <div class="media">
    <img class="rounded-circle account-img mr-3" src="{{ image_file }}">
    <div class="media-body">
      <h2 class="account-heading">{{ current_user.username }}</h2>
      <p class="text-secondary">{{ current_user.email }}</p>
    </div>
    <div class="form-group update-box ml-auto">
      <a class="nav-item nav-link update-link" href="{{ url_for('update') }}">Update</a>
    </div>
  </div>
  <!-- Iterate over posts -->
  {% for post in posts %}
  <article class="media content-section">
    <div class="media-body">
      <div class="article-metadata">
        <small class="text-muted">{{ post.date_posted }}</small>
        <form action="{{ url_for('edit_post', post_id=post.id) }}" method="POST" class="d-inline">
          <button type="submit" class="btn btn-success" title="Edit"><i class="fas fa-pen"></i></button>
        </form>
        <form action="{{ url_for('delete_post', post_id=post.id) }}" method="POST" class="d-inline">
          <button type="submit" class="btn btn-danger" title="Delete"><i class="fas fa-trash-alt"></i></button>
        </form>
      </div>
      <h2><a class="article-title" href="#">{{ post.title }}</a></h2>
      <p class="article-content">{{ post.content }}</p>
    </div>
  </article>
  {% endfor %}
</div>
{% endblock content %}
